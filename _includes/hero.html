{% assign is_home = false %}
{% if page.url == '/' or page.permalink == '/' or page.path == 'index.md' %}
  {% assign is_home = true %}
{% endif %}
{% if is_home and page.hide_hero != true %}
  {% assign show_hero_title = page.hero_show_title | default: false %}
  {% assign show_hero_subtitle = page.hero_show_subtitle | default: false %}
  {% assign hero_height = page.hero_height | default: 'is-medium' %}

  <section class="hero modern-hero {{ hero_height }} is-primary is-bold">
    <div class="hero-body">
      <div class="container has-text-centered">
        {% if show_hero_title %}
          <h1 class="title is-1 has-text-weight-bold">{{ page.title }}</h1>
        {% endif %}
        {% if show_hero_subtitle and page.subtitle %}
          <p class="subtitle is-3 has-text-weight-light hero-subtitle">{{ page.subtitle }}</p>
        {% endif %}
        {% if page.hero_description %}
          <div class="hero-description">
            <p class="is-size-5 has-text-weight-normal">
              {{ page.hero_description }}
            </p>
          </div>
        {% endif %}
        {% comment %} Check for upcoming events {% endcomment %}
        {% assign today = site.time | date: "%Y-%m-%d" %}
        {% assign all_events = site.events | sort: "date" %}
        {% assign upcoming_events = "" | split: "" %}
        {% for event in all_events %}
          {% assign event_date = event.date | date: "%Y-%m-%d" %}
          {% if event_date >= today %}
            {% assign upcoming_events = upcoming_events | push: event %}
          {% endif %}
        {% endfor %}
        {% assign upcoming_events = upcoming_events | slice: 0, 3 %}
        
        {% if page.hero_link and page.hero_link_text %}
          <div class="buttons is-centered hero-buttons">
            <a href="{{ page.hero_link | relative_url }}" class="button is-white is-large is-rounded has-text-weight-semibold">
              {{ page.hero_link_text }}
            </a>
          </div>
        {% endif %}
      </div>
    </div>
  </section>

  {% comment %} Event notification banner - professional positioning {% endcomment %}
  {% if upcoming_events.size > 0 %}
    <div class="hero-event-banner">
      <div class="container has-text-centered">
        {% assign next_event = upcoming_events[0] %}
        <span class="has-text-grey-dark is-size-6 event-label">Nächster Termin:</span>
        <a href="/termine/" class="has-text-primary has-text-weight-semibold event-link">
          <span>{{ next_event.date | date: "%d.%m.%Y" }}</span>
          <span class="event-separator">•</span>
          <span>{{ next_event.title }}</span>
        </a>
        {% if upcoming_events.size > 1 %}
          <span class="has-text-grey-dark is-size-6 event-additional">…und weitere</span>
        {% endif %}
      </div>
    </div>
  {% endif %}
{% endif %}


